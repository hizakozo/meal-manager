# ローカル開発用Dockerfile
FROM gradle:8.14.3-jdk21

WORKDIR /app

# Gradleのキャッシュを活用するため、依存関係を先にダウンロード
COPY build.gradle.kts settings.gradle.kts ./
COPY gradle gradle
RUN gradle dependencies --no-daemon || true

# ソースコードをコピー
COPY src ./src

# ポート公開
EXPOSE 8080

# Spring Bootを起動
CMD ["./gradlew", "bootRun", "--no-daemon"]
